// This is your Prisma schema file
// Learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Youtube videos
model YoutubeModel {
  id          String   @id @default(uuid())
  youtube_url String
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  @@map("zirospace_youtube")
}
// Consolidated Case Studies
model CaseStudy {
  id            String   @id @default(uuid())
  title         String
  subtitle      String
  description   String
  cta_text_name String
  cta_url       String
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
  slug          String
  order_index   Int      @default(0)
  color         String
  background_color String
  theme         String
  locale        String
  images     CaseStudyImage[]
  tags       CaseStudyTags[]

  @@unique([slug, locale])
  @@map("zirospace_case_studies")
}

// Case Study Images (linked directly to CaseStudy)
model CaseStudyTags {
  id              String   @id @default(uuid())
  name            String?
  image_url       String?
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt
  caseStudies     CaseStudy[]
  @@map("zirospace_case_study_tags")
}



// Case Study Images (linked directly to CaseStudy)
model CaseStudyImage {
  id              String   @id @default(uuid())
  image           String   // URL or path to the image
  alt             String   // Alt text for the image
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt

  // Relation back to CaseStudy
  // onDelete: Cascade ensures images are deleted when the parent CaseStudy is deleted.
  caseStudy    CaseStudy @relation(fields: [caseStudyId], references: [id], onDelete: Cascade)
  caseStudyId  String    // Foreign key

  @@index([caseStudyId]) // Index for faster lookups based on caseStudyId
  @@map("zirospace_case_study_images")
}

model CaseStudySlider {
  id         String           @id @default(uuid())
  created_at DateTime         @default(now())
  updated_at DateTime         @updatedAt
  images     CaseStudySliderImage[]

  @@map("zirospace_case_study_sliders")
}

model CaseStudySliderImage {
  id              String           @id @default(uuid())
  image           String
  alt             String
  created_at      DateTime         @default(now())
  updated_at      DateTime         @updatedAt
  caseStudySlider CaseStudySlider? @relation(fields: [sliderId], references: [id])
  sliderId        String?

  @@map("zirospace_case_study_slider_images")
}

// Hero Section (supports multiple locales)
model Hero {
  id                 String   @id @default(uuid())
  title              String
  subtitle           String
  cta_primary_text   String
  cta_primary_link   String
  cta_secondary_text String
  cta_secondary_link String
  background         String // URL or image path
  locale             String // 'en' or 'pl'
  created_at         DateTime @default(now())
  updated_at         DateTime @updatedAt

  @@unique([locale]) // Ensure only one entry per locale
  @@map("zirospace_hero")
}

// Consolidated Blog Posts
model BlogPost {
  id           String   @id @default(uuid())
  slug         String
  title        String
  image_url    String
  created_at   DateTime @default(now())
  image_alt    String?
  excerpt      String
  content_html String   @db.Text
  is_pinned    Boolean  @default(false)
  locale       String

  @@unique([slug, locale])
  @@map("zirospace_blog_posts")
}

// Consolidated Testimonials
model Testimonial {
  id         String   @id @default(uuid())
  author     String
  role       String
  company    String
  quote      String   @db.Text
  image      String
  image_alt  String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  locale     String

  @@map("zirospace_testimonials")
}

model Banner {
  id         String   @id @default(uuid())
  title      String?
  content    String?
  image_url  String?
  link       String?
  is_active  Boolean  @default(false)
  start_date DateTime
  end_date   DateTime
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  locale     String

  @@map(name: "zirospace_banners")
}
